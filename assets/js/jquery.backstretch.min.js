/*! Backstretch - v2.0.4 - 2013-06-19
 * http://srobbin.com/jquery-plugins/backstretch/
 * Copyright (c) 2013 Scott Robbin; Licensed MIT
 *
 * Updated version from https://github.com/FokkeZB/jquery-backstretch @ ed5e78e46956bb295b59b9809905ae187f99902a */
;(function(e,d,g){e.fn.backstretch=function(h,i){if(h===g||h.length===0){e.error("No images were supplied for Backstretch")}if(e(d).scrollTop()===0){d.scrollTo(0,0)}return this.each(function(){var k=e(this),j=k.data("backstretch");if(j){if(typeof h=="string"&&typeof j[h]=="function"){j[h](i);return}i=e.extend(j.options,i);j.destroy(true)}j=new b(this,h,i);k.data("backstretch",j)})};e.backstretch=function(h,i){return e("body").backstretch(h,i).data("backstretch")};e.expr[":"].backstretch=function(h){return e(h).data("backstretch")!==g};e.fn.backstretch.defaults={centeredX:true,centeredY:true,duration:5000,fade:0};var c={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999}};var b=function(j,i,l){this.options=e.extend({},e.fn.backstretch.defaults,l||{});this.images=e.isArray(i)?i:[i];e.each(this.images,function(){e("<img />")[0].src=this});this.isBody=j===document.body;this.$container=e(j);this.$root=this.isBody?f?e(d):e(document):this.$container;var k=this.$container.children(".backstretch").first();this.$wrap=k.length?k:e('<div class="backstretch"></div>').css(c.wrap).appendTo(this.$container);if(!this.isBody){var h=this.$container.css("position"),m=this.$container.css("zIndex");this.$container.css({position:h==="static"?"relative":h,zIndex:m==="auto"?0:m,background:"none"});this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&f?"fixed":"absolute"});this.index=0;this.show(this.index);e(d).on("resize.backstretch",e.proxy(this.resize,this)).on("orientationchange.backstretch",e.proxy(function(){if(this.isBody&&d.pageYOffset===0){d.scrollTo(0,1);this.resize()}},this))};b.prototype={resize:function(){try{var l={left:0,top:0},i=Math.abs(d.orientation),j=this.isBody?(a?(i===90?screen.height:screen.width):this.$root.width()):this.$root.innerWidth(),o=j,k=this.isBody?(a?(i===90?screen.width:screen.height):(d.innerHeight?d.innerHeight:this.$root.height())):this.$root.innerHeight(),h=o/this.$img.data("ratio"),n;if(isNaN(h)){return this}if(h>=k){n=(h-k)/2;if(this.options.centeredY){l.top="-"+n+"px"}}else{h=k;o=h*this.$img.data("ratio");n=(o-j)/2;if(this.options.centeredX){l.left="-"+n+"px"}}this.$wrap.css({width:j,height:k}).find("img:not(.deleteable)").css({width:o,height:h}).css(l)}catch(m){}return this},show:function(k){if(Math.abs(k)>this.images.length-1){return}var i=this,j=i.$wrap.find("img").addClass("deleteable"),h={relatedTarget:i.$container[0]};i.$container.trigger(e.Event("backstretch.before",h),[i,k]);this.index=k;clearInterval(i.interval);i.$img=e("<img />").css(c.img).bind("load",function(n){var m=this.width||e(n.target).width(),l=this.height||e(n.target).height();e(this).data("ratio",m/l);e(this).fadeIn(i.options.speed||i.options.fade,function(){j.remove();if(!i.paused){i.cycle()}e(["after","show"]).each(function(){i.$container.trigger(e.Event("backstretch."+this,h),[i,k])})});i.resize()}).appendTo(i.$wrap);i.$img.attr("src",i.images[k]);return i},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(this.index===0?this.images.length-1:this.index-1)},pause:function(){this.paused=true;return this},resume:function(){this.paused=false;this.next();return this},cycle:function(){if(this.images.length>1){clearInterval(this.interval);this.interval=setInterval(e.proxy(function(){if(!this.paused){this.next()}},this),this.options.duration)}return this},destroy:function(h){e(d).off("resize.backstretch orientationchange.backstretch");clearInterval(this.interval);if(!h){this.$wrap.remove()}this.$container.removeData("backstretch")}};var f=(function(){var i=navigator.userAgent,k=navigator.platform,q=i.match(/AppleWebKit\/([0-9]+)/),o=!!q&&q[1],j=i.match(/Fennec\/([0-9]+)/),m=!!j&&j[1],n=i.match(/Opera Mobi\/([0-9]+)/),h=!!n&&n[1],l=i.match(/MSIE ([0-9]+)/),p=!!l&&l[1];return !(((k.indexOf("iPhone")>-1||k.indexOf("iPad")>-1||k.indexOf("iPod")>-1)&&o&&o<534)||(d.operamini&&({}).toString.call(d.operamini)==="[object OperaMini]")||(n&&h<7458)||(i.indexOf("Android")>-1&&o&&o<533)||(m&&m<6)||("palmGetResource" in d&&o&&o<534)||(i.indexOf("MeeGo")>-1&&i.indexOf("NokiaBrowser/8.5.0")>-1)||(p&&p<=6))}());var a=(function(){try{document.createEvent("TouchEvent");return true}catch(h){return false}}())}(jQuery,window));
